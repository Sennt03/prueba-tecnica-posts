import{a as q}from"./chunk-GD2K3Y7Y.js";import{a as u}from"./chunk-O46OOCLH.js";import{c as y}from"./chunk-7DSHKHWS.js";import{a as D,b as g,c as b,d as H,f as k,g as U,h as X,l as x,n as z,o as V}from"./chunk-L3J3RS7V.js";import"./chunk-7BMKDUXL.js";import{Da as w,H as l,I as _,L as C,M as n,N as t,O as d,S as R,T as F,U as A,V as m,W as I,Y as G,Z as E,n as S,o as T,p as N,s as h,w as s,xa as O,ya as P,z as M}from"./chunk-KEBKWCID.js";function K(o,e){o&1&&(n(0,"div"),m(1,5),t());}function j(o,e){o&1&&(n(0,"div"),m(1,6),t());}function W(o,e){if(o&1&&(n(0,"div",16),l(1,K,2,0,"div"),l(2,j,2,0,"div"),t()),o&2){let i=G();s(),_(i.helperForm().hasError("username","email")?1:-1),s(),_(i.helperForm().hasError("username","required")?2:-1);}}function J(o,e){o&1&&(n(0,"div"),m(1,7),t());}function Q(o,e){o&1&&(n(0,"div"),m(1,8),t());}function Y(o,e){if(o&1&&(n(0,"div",16),l(1,J,2,0,"div")(2,Q,2,0,"div"),t()),o&2){let i=G();s(),_(i.helperForm().hasError("password","minlength")?1:i.helperForm().hasError("password","required")?2:-1);}}var B=class o{form;maskLoad=h(!1);router=S(O);formBuilder=S(x);authService=S(y);helperForm=()=>q(this.form);constructor(){this.buildForm();}buildForm(){this.form=this.formBuilder.group({username:["",[g.required,g.email]],password:["",[g.required,g.minLength(8)]]});}login(){if(!this.form.valid){this.form.markAllAsTouched();return;}this.maskLoad.set(!0),this.authService.login(this.form.value).subscribe({next:e=>{this.maskLoad.set(!1),this.authService.saveAuth(e),this.form.markAsUntouched();let i="Bienvenue !";u.success(i,""),this.router.navigate(["/"]);},error:e=>{this.maskLoad.set(!1),u.setOption("timeOut",3e3),window.innerWidth<768&&u.setOption("positionClass","toast-top-center");let i=e.status==401?"Identifiants invalides !":"Identifiants invalides !";u.error(i,""),u.setDefaultsOptions();}});}togglePasswordVisibility(e,i){e.classList.contains("fa-eye")?(e.classList.add("fa-eye-slash"),e.classList.remove("fa-eye"),i.type="text"):(e.classList.add("fa-eye"),e.classList.remove("fa-eye-slash"),i.type="password");}static ɵfac=function(i){return new(i||o)();};static ɵcmp=M({type:o,selectors:[["app-login"]],decls:22,vars:4,consts:()=>{let e;e="E-mail";let i;i="Mot de passe";let r;r="Bienvenue"+"\uFFFD#3\uFFFD"+"."+"\uFFFD/#3\uFFFD"+"";let c;c="Vous n'avez pas de compte ? "+"\uFFFD#6\uFFFD"+"S'inscrire"+"\uFFFD/#6\uFFFD"+"";let p;p="Se connecter";let f;f="*entrez un e-mail valide";let L;L="*requis";let $;$="*minimum 8 caract\xE8res";let v;return v="*requis",[["password1",""],["passwordIcon1",""],r,c,p,f,L,$,v,[1,"header","animate__animated","animate__fadeInDown"],[2,"color","#4da6ff"],["routerLink","../register"],[1,"animate__animated","animate__fadeInUp",3,"ngSubmit","formGroup"],[1,"form-group"],["type","email","placeholder",e,"formControlName","username"],[1,"fa-solid","fa-envelope"],[1,"div-error"],["type","password","placeholder",i,"formControlName","password"],[1,"icon-password","fa-regular","fa-eye",3,"click"],[1,"btns"],["type","submit",1,"btn","btn-create"],[3,"show"]];},template:function(i,r){if(i&1){let c=R();n(0,"div",9)(1,"h2"),F(2,2),d(3,"span",10),A(),t(),n(4,"p"),F(5,3),d(6,"a",11),A(),t()(),n(7,"form",12),I("ngSubmit",function(){return T(c),N(r.login());}),n(8,"div",13),d(9,"input",14)(10,"i",15),t(),l(11,W,3,2,"div",16),n(12,"div",13),d(13,"input",17,0),n(15,"i",18,1),I("click",function(){T(c);let f=E(14),L=E(16);return N(r.togglePasswordVisibility(L,f));}),t()(),l(17,Y,3,1,"div",16),n(18,"div",19)(19,"button",20),m(20,4),t()()(),d(21,"app-loading",21);}i&2&&(s(7),C("formGroup",r.form),s(4),_(r.helperForm().haveErrors("username")?11:-1),s(6),_(r.helperForm().haveErrors("password")?17:-1),s(4),C("show",r.maskLoad()));},dependencies:[w,P,z,k,D,b,H,U,X,V],encapsulation:2});};export{B as Login};/**i18n:b3883ab85ae623dab2f76dee90edb1a23055e95a2aa7383157e4cbec120e5849*/