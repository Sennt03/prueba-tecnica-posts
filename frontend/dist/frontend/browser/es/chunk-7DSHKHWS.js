import{a as g}from"./chunk-7BMKDUXL.js";import{k as i,n as r,qa as a,ra as u,sa as p,xa as c}from"./chunk-KEBKWCID.js";var h=new a(()=>!1);function l(){return new u().set(h,!0)}var I=(e,t)=>{let n=r(o).getToken();if(e.context.get(h)===!0)return t(e);if(n){let f=e.clone({setHeaders:{Authorization:`Bearer ${n}`}});return t(f)}return t(e)};var m={token:"",username:"",expiresIn:0};var o=class e{url=`${g.url_api}/auth`;noToken={context:l()};http=r(p);router=r(c);constructor(){}login(t){return this.http.post(`${this.url}/login`,t,this.noToken)}register(t){return this.http.post(`${this.url}/register`,t,this.noToken)}saveAuth(t){localStorage.setItem("auth",JSON.stringify(t.data))}getAuth(){try{return JSON.parse(localStorage.getItem("auth"))}catch{return this.logout(),!1}}getUser(){try{return JSON.parse(localStorage.getItem("auth"))}catch{return this.logout(),m}}getToken(){return this.getAuth()?.token}loggedIn(){return!!this.getAuth()}logout(){return localStorage.removeItem("auth"),this.router.navigate(["/auth/login"]),this.http.post(`${this.url}/logout`,{})}static \u0275fac=function(s){return new(s||e)};static \u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})};export{h as a,I as b,o as c};
/**i18n:b3883ab85ae623dab2f76dee90edb1a23055e95a2aa7383157e4cbec120e5849*/
