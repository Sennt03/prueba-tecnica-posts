import{a as F}from"./chunk-7FRMDTV7.js";import{a as G}from"./chunk-QK6VAQQ4.js";import{a as d}from"./chunk-LE7XSPC6.js";import{a as x,b as f,c as w,d as A,f as R,g as W,h as I,l as y,n as L,o as z}from"./chunk-HZJLCJNH.js";import"./chunk-XJRKDVTJ.js";import{$ as T,H as u,I as g,L as S,M as r,N as n,O as s,V as _,W as v,Y as P,ba as h,n as p,s as E,va as $,w as a,xa as b,z as N}from"./chunk-HZWXEUWY.js";function X(o,t){o&1&&(r(0,"div"),_(1,2),n());}function k(o,t){o&1&&(r(0,"div"),_(1,3),n());}function q(o,t){if(o&1&&(r(0,"div",13),u(1,X,2,0,"div")(2,k,2,0,"div"),n()),o&2){let e=P();a(),g(e.helperForm().hasError("title","minlength")?1:e.helperForm().hasError("title","required")?2:-1);}}function D(o,t){o&1&&(r(0,"div"),_(1,4),n());}function B(o,t){o&1&&(r(0,"div"),_(1,5),n());}function V(o,t){if(o&1&&(r(0,"div",13),u(1,D,2,0,"div")(2,B,2,0,"div"),n()),o&2){let e=P();a(),g(e.helperForm().hasError("content","minlength")?1:e.helperForm().hasError("content","required")?2:-1);}}var H=class o{formBuilder=p(y);router=p(b);route=p($);postService=p(G);form;maskLoad=E(!1);edit=E(!1);postId=null;helperForm=()=>F(this.form);getTitle=()=>this.edit()?"Editar post":"Crea un post";getTextBtn=()=>this.edit()?"Editar":"Publicar Post";constructor(){this.buildForm();}ngOnInit(){this.route.paramMap.subscribe(t=>{this.postId=t.get("id"),this.postId&&(this.edit.set(!0),this.loadPostForEditing(this.postId));});}buildForm(){this.form=this.formBuilder.group({title:["",[f.required,f.minLength(3)]],content:["",[f.required,f.minLength(20)]]});}loadPostForEditing(t){this.maskLoad.set(!0),this.postService.getById(t).subscribe({next:e=>{this.maskLoad.set(!1),this.form.patchValue(e.data);},error:e=>{let i="Fallo al cargar el post!";this.myErrorHandler(e,i);}});}sendPost(){if(!this.form.valid){this.form.markAllAsTouched();return;}this.maskLoad.set(!0);let t=this.postId,e=this.edit()?this.postService.update(this.form.value,t):this.postService.create(this.form.value),i=this.edit()?"Editado correctamente!":"Creado correctamente!",c=this.edit()?"Fallo al editar!":"Fallo al crear!";e.subscribe({next:m=>{d.success(i,""),this.maskLoad.set(!1),this.form.markAsUntouched(),this.router.navigate(["/"]);},error:m=>this.myErrorHandler(m,c)});}myErrorHandler(t,e){this.maskLoad.set(!1),d.setOption("timeOut",3e3),window.innerWidth<768&&d.setOption("positionClass","toast-top-center"),d.error(t.error.message,e),d.setDefaultsOptions();}static ɵfac=function(e){return new(e||o)();};static ɵcmp=N({type:o,selectors:[["app-new-post"]],decls:20,vars:6,consts:()=>{let t;t="Ingresa un t\xEDtulo";let e;e="Escribe tu post...";let i;i="T\xEDtulo";let c;c="Contenido";let m;m="*debe tener m\xEDnimo 3 letras";let M;M="*requerido";let C;C="*contenido con m\xEDnimo 20 letras";let O;return O="*requerido",[i,c,m,M,C,O,[1,"content"],[1,"create-post"],[1,"fa-solid","fa-pen-to-square"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","title"],["type","text","id","title","placeholder",t,"formControlName","title"],[1,"div-error"],["for","content"],["id","content","placeholder",e,"formControlName","content"],["type","submit"],[1,"fa-solid","fa-plus"],[3,"show"]];},template:function(e,i){e&1&&(r(0,"div",6)(1,"div",7)(2,"h2"),s(3,"i",8),T(4),n(),r(5,"form",9),v("ngSubmit",function(){return i.sendPost();}),r(6,"div",10)(7,"label",11),_(8,0),n(),s(9,"input",12),n(),u(10,q,3,1,"div",13),r(11,"div",10)(12,"label",14),_(13,1),n(),s(14,"textarea",15),n(),u(15,V,3,1,"div",13),r(16,"button",16),s(17,"i",17),T(18),n()()()(),s(19,"app-loading",18)),e&2&&(a(4),h(" ",i.getTitle()),a(),S("formGroup",i.form),a(5),g(i.helperForm().haveErrors("title")?10:-1),a(5),g(i.helperForm().haveErrors("content")?15:-1),a(3),h(" ",i.getTextBtn()),a(),S("show",i.maskLoad()));},dependencies:[L,R,x,w,A,W,I,z],styles:[".content[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;color:#fff;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}.create-post[_ngcontent-%COMP%]{background:#1f2535;padding:30px;border-radius:15px;box-shadow:0 5px 20px #0006;width:500px;max-width:95%;position:relative}.create-post[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;color:#bbb}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:10px;background:#2a3248;color:#fff;font-size:14px;outline:none}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;height:120px}button[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:12px;background:#4da6ff;color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:.3s}button[_ngcontent-%COMP%]:hover{background:#3691eb}"]});};export{H as NewPost};/**i18n:e0e6b7e5a6959eede70c539bb63d3cfbc2522b350f8f84267cc4f5ca10e69f08*/